<!doctype html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="description" content="Slides for the CodeMash 2015 talk by Chandu Tennety and John Andrews">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>A Bird's Eye View of ClojureScript</title>
    <link rel="stylesheet" href="css/reveal.min.css">
    <link rel="stylesheet" href="css/theme/solarized.css" id="theme">
    <!-- For syntax highlighting -->
    <link rel="stylesheet" href="lib/css/hemisu-light.css">
    <!-- If the query includes 'print-pdf', include the PDF print sheet -->
    <script>
      if( window.location.search.match( /print-pdf/gi ) ) {
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = 'css/print/pdf.css';
        document.getElementsByTagName( 'head' )[0].appendChild( link );
      }
    </script>
    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
  </head>

  <body>
    <div class="reveal">
      <div class="slides">
        <section>
          <h1>A Bird's Eye View of ClojureScript</h1>
          <h3>Or: you don't <em>have</em> to write JavaScript!</h3>
          <p>
            <small>Chandu Tennety &middot; John Andrews</small>
          </p>
          <aside class="notes">
            Thank you for coming to this talk, we value your time and are excited that you chose to share it with us.
            And we're excited to share our experiences with you and hope that you find value from them.
            I'm Chandu, I do app development at Neo, mostly using Rails and JavaScript. This is John Andrews.
            <!-- John introduces himself ><!-->
          </aside>
        </section>


        <section>
          <h2>Motivation</h2>
          <h3>Birding: a quick introduction</h3>
          <img alt="bird" src="http://placekitten.com/g/200/300" class="fragment">
          <img alt="map" src="http://placekitten.com/g/200/300" class="fragment">
          <aside class="notes" data-markdown>
            ### Birding
            * Observing and identifying birds, visually and by ear.
            * Quiet and relaxing (when you need to get away from big crowds of technologists)
            * Closely tied with migratory patterns:
              - Migration seasons are peaks
              - Non-migratory birds are all you have in the off-season
            * Field guides
              - Beautiful illustrations, identifying characteristics
            * example: *something with nice art and characteristic song*
              - Show static maps of breeding areas during the year
            * example: *map of the above bird*
            * So I thought it'd be nice to plot bird migration data on a map
            * Basically this
          </aside>
        </section>


        <section>
          <h2>Demo &mdash; Birdwave</h2>
          <iframe width="560" height="315" src="//www.youtube.com/embed/rzeGJavK-0o?rel=0" frameborder="0" allowfullscreen></iframe>
        </section>


        <section>
          <section>
            <h2>Premise &mdash; Data</h2>
            <h3><a target="_blank" href="http://ebird.org/content/ebird/about/">eBird</a> data set</h3>
            <ul class="task-list">
              <li class="fragment">Data for 1 year for the US region</li>
              <li class="fragment">29 GB of tab-separated values</li>
              <li class="fragment">Nearly 1800 species</li>
            </ul>
            <aside class="notes" data-markdown>
              ### eBird
              * Collaboration between National Audubon Society and Cornell Lab of Ornithology
              * Gather bird sighting reports from all over the world (an incredible amount of data)
              * Had a very basic API, not good for trends
              * Data available for download free for academic use
            </aside>
          </section>

          <section>
            <h2>Premise &mdash; Back-end</h2>
            <h3>The need for an API</h3>
            <ul class="task-list">
              <li class="fragment">Too much data to load at once</li>
              <li class="fragment">d3 handles JSON requests</li>
              <li class="fragment">Dynamic nature of the app</li>
            </ul>
            <aside class="notes" data-markdown>
              * There's way too much data to *not* load on demand
              * It uses callbacks ootb, but can be made to use promises
              * The event-driven nature of the app meant that it couldn't be
              modeled with a traditional request-response cycle. There needed to
              be an API capable of rendering tailored responses to different
              parameters.
            </aside>
          </section>
        </section>


        <section>
          <h2>Why Clojure</h2>
            <pre>
;; Clojure
            <code>
(defn sighting-seq
  "Return a lazy sequence of lines from filename, transformed into sighting maps"
  [filename skip-rows nth-row]
  (map sighting
    (take-nth nth-row
      (drop (if skip-rows skip-rows 1)
        (line-seq (io/reader filename))))))
          </code></pre>
        </section>


        <section>
          <h2>Premise &mdash; Front-end</h2>
          <h3>Got ClojureScript?</h3>
          <ul class="task-list">
            <li class="fragment">Easy to integrate into the existing stack</li>
            <li class="fragment">Same language on both client and server</li>
            <li class="fragment">Interoperability with JavaScript</li>
          </ul>
          <aside class="notes" data-markdown>
            * Parity with Clojure on JVM
            * Let's dig into what else it has to offer
          </aside>
        </section>


        <section>
          <section>
            <h2>Why ClojureScript?</h2>
            <h3>Well, what <strong>is</strong> it, precious?</h3>
            <img src="/images/gollum.gif" alt="What is it?">
            <aside class="notes" data-markdown>
              When you ask most people what ClojureScript is, this is the
              reaction you seem to get. In the world of JavaScript dev, it's
              not very clear where ClojureScript fits in. It's not a
              framework, or syntactic sugar on top of JavaScript.
              So what is it? It's a program that compiles Clojure into
              JavaScript.
            </aside>
          </section>

          <section>
            <h2>Why ClojureScript?</h2>
            <ul class="task-list">
              <li>Compiler for Clojure to JavaScript</li>
              <li class="fragment">Emits JS optimized for the Google Closure library</li>
              <li class="fragment">Several benefits over vanilla JS</li>
            </ul>
            <aside class="notes" data-markdown>
              ### Compiler
              * cljsbuild plugin for Leiningen

              ### Closure
              * Minification
              * Dead code elimination
              * Namespacing

              ### Benefits
              * Persistent data structures
              * Object keys as opposed to only strings
              * Macros
              * Function argument destructuring
              These benefits have been spoken about in detail in other talks, and
              we have resources at the end which list some of them. It's really
              interesting work, and has come a long way since the initial thought
              experiment.
            </aside>
          </section>

          <section>
            <h2>Why ClojureScript?</h2>
            <pre>
;; ClojureScript
            <code>
(def api-base-url (url "https://api.flickr.com/services/rest/"))

(-> api-base-url
  (assoc :query {:api_key "my_super_flickr_key"})
  str)))
            </code>
;; https://api.flickr.com/services/rest/?api_key=my_super_flickr_key
            </pre>
            <aside class="notes" data-markdown>
            Here's a simple example of what ClojureScript allows me to do. Say
            you're building a Flickr API client.
            * Query string can contain: api_key, nojsoncallback, license, search
            * The `url` library allows me to take a string and create a URL instance
            * I can associate a map of key values to this instance
            * When I call `str` on it, it creates a query string with the map
            * It made creating the long Flickr API strings a breeze
            </aside>
          </section>

          <section>
            <h2>Why ClojureScript?</h2>
            <h6>Two (dot-separated) words:</h6>
            <h3 class="fragment"><code>core.async</code></h3>
            <aside class="notes" data-markdown>
            </aside>
          </section>
        </section>


        <section>
          <section>
            <h2>d3 &mdash; A Quick Intro</h2>
            <ul class="task_list">
              <li class="fragment">Built around tying data with DOM (using SVG)</li>
              <li class="fragment">Huge ecosystem solving all kinds of problems</li>
            </ul>
            <aside class="notes" data-markdown>
              After that mind-trip, let's shift gears and talk about d3.
              * Set of libraries that enable DOM manipulation based on data
              bindings
              * Fluent API around using functional transforms of the bound data
              to change the state of the DOM elements
              We'll quickly cover the parts relating to mapping.
            </aside>
          </section>

          <section>
            <h2>d3 &mdash; A Quick Intro</h2>
            <h3>Scales, axes, behaviors</h3>
            <aside class="notes" data-markdown>
            </aside>
          </section>

          <section>
            <h2>d3 &mdash; A Quick Intro</h2>
            <h3>GeoJSON and TopoJSON</h3>
            <aside class="notes" data-markdown>
            </aside>
          </section>
        </section>


        <section>
          <section>
            <h2>d3 and JavaScript Interop</h2>
            <h3>Methods and Props</h3>
            <pre>
// JavaScript
            <code>
var activeState = function() {
  return d3.select(".active");
}
            </code></pre>
            <pre>
;; ClojureScript
            <code>
(defn active-state [] (.select js/d3 ".active"))
            </code></pre>
          </section>

          <section>
            <h2>d3 and JavaScript Interop</h2>
            <h3>Methods and Props</h3>
            <pre>
// JavaScript
            <code>
var target = function() {
  return d3.event.target;
}
            </code></pre>
            <pre>
;; ClojureScript
            <code>
(defn target [] (.-target (.-event js/d3)))
            </code></pre>
          </section>

          <section>
            <h2>d3 and JavaScript Interop</h2>
            <h3>Fluent APIs and the <code>-></code> Macro</h3>
            <pre>
// JavaScript
            <code>
var months = d3.time.scale
               .domain([new Date(2012,10,15), new Date(2013,10,15)])
               .range([0, 900])
            </code></pre>
            <pre>
;; ClojureScript
            <code>
(def months ( -> (js/d3.time.scale)
   (.domain (array (js/Date. 2012 10 15) (js/Date. 2013 10 15)))
   (.range (array 0 900))))
            </code></pre>
          </section>
        </section>
      </div>
    </div>

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.min.js"></script>

    <script>

      // Full list of configuration options available here:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,

        theme: "solarized", // available themes are in /css/theme
        transition: "page", // default/cube/page/concave/zoom/linear/fade/none

        // Parallax scrolling
        // parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
        // parallaxBackgroundSize: '2100px 900px',

        // Optional libraries used to extend on reveal.js
        dependencies: [
        { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
        { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
        { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
        { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
        { src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
        { src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
        ]
        });

      </script>

    </body>
  </html>
